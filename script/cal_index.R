
library(ggplot2)
library('pracma')

cal_index <- function(rr, rbase, d) {
	set.seed(10)
	rr = subset(rr, stock %in% intersect(rr[,1], colnames(d)))
	rbase = subset(rbase, stock %in% intersect(rbase[,1], colnames(d)))
	
	nd = apply(rbase, 1, function(x) {
		d[, x[1]] * as.numeric(x[3])/sum(as.numeric(rbase[, 3]))
	})
	#ts.plot(apply(nd, 1, sum))
	
	nd2 = apply(rr, 1, function(x) {
		d[, x[1]] * as.numeric(x[2])/sum(as.numeric(rr[, 2]))
	})
	
	nd3 = apply(rr, 1, function(x) {
		d[, x[1]] * as.numeric(x[3])/sum(as.numeric(rr[, 3]))
	})

	pos4 = randperm(nrow(rbase), nrow(rr))
	
	nd4 = apply(rbase[pos4, ], 1, function(x) {
		d[, x[1]] * as.numeric(x[3])/sum(as.numeric(rbase[pos4, 3]))
	})
	
	#ts.plot(apply(nd, 1, sum), apply(nd2, 1, sum))
	
	nd = apply(nd, 1, sum)
	nd2 = apply(nd2, 1, sum)
	nd3 = apply(nd3, 1, sum)
	nd4 = apply(nd4, 1, sum)
	
	# nd = nd / nd[1]
	# nd2 = nd2 / nd2[1]
	# nd3 = nd3 / nd3[1]
	# nd4 = nd4 / nd4[1]
	
	# #nd = (nd[-1] - nd[-length(nd)])/nd[-length(nd)]
	# #nd2 = (nd2[-1] - nd2[-length(nd2)])/nd2[-length(nd2)]
	
	
	# data = data.frame(x = rep(1:length(nd), 4), y = c(nd, nd2, nd3, nd4), g = factor(c( rep(1, length(nd)), rep(2, length(nd2)), rep(3, length(nd3)), rep(4, length(nd3)))))

	# levels(data$g) = c('S&P 500', 'Leadership (20)', 'top 20 cap', 'random')
	# #print(data$g)
	# ggplot(data) + geom_line(aes(x, y, group = g, color= factor(g))) + geom_point(aes(x, y, group = g, color= factor(g), shape=factor(g)))
	
	row = length(nd)
	c(nd[row], nd2[row], nd3[row], nd4[row])
}

# 
disp_index <- function(rfile, rbfile, dfile, len=0) {
	rr = read.table(rfile, header=F, col.names=c('stock', 'value', 'cap', 'sector', 'industry'))
	
	rbase = read.table(rbfile, header=F, , col.names=c('stock', 'value', 'cap', 'sector', 'industry'))
	
	data = read.table(dfile, header=T)
	
	if(len > 0)
	rr = rr[1:len,]
	cal_index(rr, rbase, data)
}

#rfile = '../data/sp100_128_1374586260_1374609600_step_1/sp500_128_1374594360_1374601980_comps_thresh_0.rank'
#rbfile = rfile
#dfile = '../data/sp100_128_1374586260_1374609600_step_1/sp500_128_1374601980_1374609600.data'

rank_list = c('sp100_128_1374586260_1374609600_step_1/sp500_128_1374586200_1374593820_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586260_1374593880_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586320_1374593940_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586380_1374594000_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586440_1374594060_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586500_1374594120_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586560_1374594180_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586620_1374594240_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586680_1374594300_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586740_1374594360_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586800_1374594420_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586860_1374594480_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586920_1374594540_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586980_1374594600_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587040_1374594660_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587100_1374594720_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587160_1374594780_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587220_1374594840_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587280_1374594900_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587340_1374594960_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587400_1374595020_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587460_1374595080_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587520_1374595140_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587580_1374595200_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587640_1374595260_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587700_1374595320_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587760_1374595380_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587820_1374595440_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587880_1374595500_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587940_1374595560_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588000_1374595620_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588060_1374595680_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588120_1374595740_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588180_1374595800_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588240_1374595860_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588300_1374595920_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588360_1374595980_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588420_1374596040_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588480_1374596100_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588540_1374596160_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588600_1374596220_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588660_1374596280_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588720_1374596340_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588780_1374596400_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588840_1374596460_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588900_1374596520_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588960_1374596580_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589020_1374596640_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589080_1374596700_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589140_1374596760_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589200_1374596820_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589260_1374596880_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589320_1374596940_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589380_1374597000_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589440_1374597060_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589500_1374597120_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589560_1374597180_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589620_1374597240_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589680_1374597300_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589740_1374597360_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589800_1374597420_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589860_1374597480_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589920_1374597540_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589980_1374597600_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590040_1374597660_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590100_1374597720_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590160_1374597780_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590220_1374597840_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590280_1374597900_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590340_1374597960_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590400_1374598020_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590460_1374598080_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590520_1374598140_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590580_1374598200_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590640_1374598260_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590700_1374598320_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590760_1374598380_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590820_1374598440_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590880_1374598500_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590940_1374598560_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591000_1374598620_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591060_1374598680_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591120_1374598740_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591180_1374598800_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591240_1374598860_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591300_1374598920_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591360_1374598980_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591420_1374599040_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591480_1374599100_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591540_1374599160_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591600_1374599220_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591660_1374599280_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591720_1374599340_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591780_1374599400_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591840_1374599460_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591900_1374599520_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591960_1374599580_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592020_1374599640_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592080_1374599700_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592140_1374599760_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592200_1374599820_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592260_1374599880_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592320_1374599940_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592380_1374600000_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592440_1374600060_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592500_1374600120_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592560_1374600180_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592620_1374600240_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592680_1374600300_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592740_1374600360_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592800_1374600420_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592860_1374600480_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592920_1374600540_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592980_1374600600_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593040_1374600660_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593100_1374600720_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593160_1374600780_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593220_1374600840_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593280_1374600900_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593340_1374600960_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593400_1374601020_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593460_1374601080_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593520_1374601140_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593580_1374601200_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593640_1374601260_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593700_1374601320_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593760_1374601380_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593820_1374601440_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593880_1374601500_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593940_1374601560_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594000_1374601620_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594060_1374601680_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594120_1374601740_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594180_1374601800_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594240_1374601860_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594300_1374601920_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594360_1374601980_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594420_1374602040_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594480_1374602100_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594540_1374602160_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594600_1374602220_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594660_1374602280_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594720_1374602340_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594780_1374602400_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594840_1374602460_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594900_1374602520_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594960_1374602580_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595020_1374602640_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595080_1374602700_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595140_1374602760_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595200_1374602820_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595260_1374602880_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595320_1374602940_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595380_1374603000_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595440_1374603060_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595500_1374603120_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595560_1374603180_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595620_1374603240_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595680_1374603300_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595740_1374603360_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595800_1374603420_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595860_1374603480_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595920_1374603540_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595980_1374603600_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596040_1374603660_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596100_1374603720_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596160_1374603780_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596220_1374603840_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596280_1374603900_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596340_1374603960_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596400_1374604020_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596460_1374604080_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596520_1374604140_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596580_1374604200_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596640_1374604260_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596700_1374604320_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596760_1374604380_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596820_1374604440_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596880_1374604500_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596940_1374604560_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597000_1374604620_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597060_1374604680_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597120_1374604740_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597180_1374604800_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597240_1374604860_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597300_1374604920_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597360_1374604980_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597420_1374605040_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597480_1374605100_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597540_1374605160_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597600_1374605220_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597660_1374605280_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597720_1374605340_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597780_1374605400_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597840_1374605460_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597900_1374605520_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597960_1374605580_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598020_1374605640_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598080_1374605700_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598140_1374605760_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598200_1374605820_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598260_1374605880_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598320_1374605940_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598380_1374606000_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598440_1374606060_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598500_1374606120_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598560_1374606180_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598620_1374606240_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598680_1374606300_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598740_1374606360_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598800_1374606420_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598860_1374606480_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598920_1374606540_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598980_1374606600_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599040_1374606660_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599100_1374606720_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599160_1374606780_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599220_1374606840_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599280_1374606900_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599340_1374606960_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599400_1374607020_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599460_1374607080_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599520_1374607140_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599580_1374607200_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599640_1374607260_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599700_1374607320_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599760_1374607380_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599820_1374607440_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599880_1374607500_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599940_1374607560_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600000_1374607620_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600060_1374607680_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600120_1374607740_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600180_1374607800_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600240_1374607860_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600300_1374607920_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600360_1374607980_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600420_1374608040_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600480_1374608100_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600540_1374608160_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600600_1374608220_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600660_1374608280_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600720_1374608340_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600780_1374608400_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600840_1374608460_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600900_1374608520_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600960_1374608580_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601020_1374608640_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601080_1374608700_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601140_1374608760_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601200_1374608820_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601260_1374608880_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601320_1374608940_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601380_1374609000_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601440_1374609060_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601500_1374609120_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601560_1374609180_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601620_1374609240_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601680_1374609300_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601740_1374609360_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601800_1374609420_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601860_1374609480_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601920_1374609540_comps_thresh_0.rank',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601980_1374609600_comps_thresh_0.rank')

data_list = c('sp100_128_1374586260_1374609600_step_1/sp500_128_1374586200_1374593820.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586260_1374593880.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586320_1374593940.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586380_1374594000.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586440_1374594060.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586500_1374594120.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586560_1374594180.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586620_1374594240.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586680_1374594300.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586740_1374594360.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586800_1374594420.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586860_1374594480.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586920_1374594540.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374586980_1374594600.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587040_1374594660.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587100_1374594720.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587160_1374594780.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587220_1374594840.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587280_1374594900.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587340_1374594960.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587400_1374595020.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587460_1374595080.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587520_1374595140.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587580_1374595200.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587640_1374595260.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587700_1374595320.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587760_1374595380.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587820_1374595440.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587880_1374595500.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374587940_1374595560.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588000_1374595620.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588060_1374595680.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588120_1374595740.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588180_1374595800.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588240_1374595860.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588300_1374595920.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588360_1374595980.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588420_1374596040.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588480_1374596100.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588540_1374596160.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588600_1374596220.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588660_1374596280.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588720_1374596340.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588780_1374596400.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588840_1374596460.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588900_1374596520.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374588960_1374596580.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589020_1374596640.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589080_1374596700.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589140_1374596760.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589200_1374596820.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589260_1374596880.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589320_1374596940.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589380_1374597000.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589440_1374597060.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589500_1374597120.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589560_1374597180.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589620_1374597240.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589680_1374597300.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589740_1374597360.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589800_1374597420.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589860_1374597480.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589920_1374597540.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374589980_1374597600.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590040_1374597660.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590100_1374597720.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590160_1374597780.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590220_1374597840.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590280_1374597900.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590340_1374597960.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590400_1374598020.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590460_1374598080.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590520_1374598140.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590580_1374598200.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590640_1374598260.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590700_1374598320.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590760_1374598380.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590820_1374598440.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590880_1374598500.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374590940_1374598560.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591000_1374598620.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591060_1374598680.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591120_1374598740.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591180_1374598800.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591240_1374598860.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591300_1374598920.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591360_1374598980.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591420_1374599040.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591480_1374599100.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591540_1374599160.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591600_1374599220.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591660_1374599280.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591720_1374599340.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591780_1374599400.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591840_1374599460.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591900_1374599520.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374591960_1374599580.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592020_1374599640.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592080_1374599700.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592140_1374599760.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592200_1374599820.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592260_1374599880.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592320_1374599940.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592380_1374600000.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592440_1374600060.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592500_1374600120.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592560_1374600180.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592620_1374600240.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592680_1374600300.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592740_1374600360.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592800_1374600420.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592860_1374600480.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592920_1374600540.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374592980_1374600600.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593040_1374600660.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593100_1374600720.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593160_1374600780.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593220_1374600840.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593280_1374600900.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593340_1374600960.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593400_1374601020.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593460_1374601080.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593520_1374601140.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593580_1374601200.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593640_1374601260.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593700_1374601320.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593760_1374601380.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593820_1374601440.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593880_1374601500.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374593940_1374601560.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594000_1374601620.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594060_1374601680.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594120_1374601740.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594180_1374601800.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594240_1374601860.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594300_1374601920.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594360_1374601980.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594420_1374602040.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594480_1374602100.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594540_1374602160.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594600_1374602220.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594660_1374602280.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594720_1374602340.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594780_1374602400.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594840_1374602460.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594900_1374602520.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374594960_1374602580.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595020_1374602640.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595080_1374602700.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595140_1374602760.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595200_1374602820.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595260_1374602880.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595320_1374602940.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595380_1374603000.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595440_1374603060.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595500_1374603120.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595560_1374603180.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595620_1374603240.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595680_1374603300.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595740_1374603360.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595800_1374603420.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595860_1374603480.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595920_1374603540.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374595980_1374603600.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596040_1374603660.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596100_1374603720.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596160_1374603780.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596220_1374603840.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596280_1374603900.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596340_1374603960.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596400_1374604020.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596460_1374604080.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596520_1374604140.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596580_1374604200.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596640_1374604260.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596700_1374604320.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596760_1374604380.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596820_1374604440.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596880_1374604500.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374596940_1374604560.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597000_1374604620.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597060_1374604680.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597120_1374604740.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597180_1374604800.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597240_1374604860.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597300_1374604920.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597360_1374604980.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597420_1374605040.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597480_1374605100.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597540_1374605160.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597600_1374605220.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597660_1374605280.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597720_1374605340.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597780_1374605400.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597840_1374605460.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597900_1374605520.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374597960_1374605580.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598020_1374605640.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598080_1374605700.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598140_1374605760.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598200_1374605820.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598260_1374605880.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598320_1374605940.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598380_1374606000.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598440_1374606060.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598500_1374606120.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598560_1374606180.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598620_1374606240.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598680_1374606300.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598740_1374606360.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598800_1374606420.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598860_1374606480.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598920_1374606540.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374598980_1374606600.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599040_1374606660.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599100_1374606720.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599160_1374606780.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599220_1374606840.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599280_1374606900.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599340_1374606960.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599400_1374607020.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599460_1374607080.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599520_1374607140.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599580_1374607200.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599640_1374607260.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599700_1374607320.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599760_1374607380.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599820_1374607440.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599880_1374607500.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374599940_1374607560.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600000_1374607620.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600060_1374607680.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600120_1374607740.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600180_1374607800.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600240_1374607860.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600300_1374607920.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600360_1374607980.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600420_1374608040.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600480_1374608100.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600540_1374608160.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600600_1374608220.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600660_1374608280.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600720_1374608340.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600780_1374608400.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600840_1374608460.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600900_1374608520.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374600960_1374608580.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601020_1374608640.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601080_1374608700.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601140_1374608760.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601200_1374608820.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601260_1374608880.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601320_1374608940.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601380_1374609000.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601440_1374609060.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601500_1374609120.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601560_1374609180.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601620_1374609240.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601680_1374609300.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601740_1374609360.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601800_1374609420.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601860_1374609480.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601920_1374609540.data',
'sp100_128_1374586260_1374609600_step_1/sp500_128_1374601980_1374609600.data')

rmat = matrix(0, nrow=length(rank_list)-1, ncol=4);

for(i in 2:length(rank_list)) {
	 
		rr = read.table(paste('../data/', rank_list[i-1], sep=''), header=F, col.names=c('stock', 'value', 'cap', 'sector', 'industry'))
	
		rbase = rr
	
		data = read.table(paste('../data/', data_list[i], sep=''), header=T)
		rr = rr[1:10, ]
		rmat[i-1,] = cal_index(rr, rbase, data)
}
colnames(rmat) = c('S&P 500', 'Leadership (20)', 'top 20 cap', 'random')

rmat = apply(rmat, 2, function(x) { (x - mean(x)) / sd(x) } )

res = matrix(nrow=0, ncol=4)

for(i in c(1, 3, 4)) {
	tb = matrix(nrow=4, ncol=nrow(rmat))
	tb[1,] = rep(colnames(rmat)[i], nrow(rmat))
	tb[2,] = 1:nrow(rmat)
	tb[3,] = rmat[,i]
	tb[4,] = 1:nrow(rmat)
	
	res = rbind(res, t(tb))
}


res = data.frame(stock= res[,1], x = as.numeric(res[,2]), y = as.numeric(res[,3]), g=res[,4])
#names(res) = c('Stock', 'x', 'y', 'date')



#colnames(rmat) = c('S&P 500', 'Leadership (20)', 'top 20 cap', 'random')



# data = data.frame(x = rep(1:length(nd), 4), y = c(nd, nd2, nd3, nd4), g = factor(c( rep(1, length(nd)), rep(2, length(nd2)), rep(3, length(nd3)), rep(4, length(nd3)))))

	# levels(data$g) = c('S&P 500', 'Leadership (20)', 'top 20 cap', 'random')
	# #print(data$g)
	 ggplot(res) + geom_line(aes(x, y, group = factor(stock), color= factor(stock))) + geom_point(aes(x, y, group = factor(stock), color= factor(stock), shape=factor(stock)))
	
	